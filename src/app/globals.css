
@tailwind base;
@tailwind components;
@tailwind utilities;

@layer base {
  :root {
    --background: 220 13% 96%; /* #f1f3f4 */
    --foreground: 220 10% 13%; /* #202124 */

    --card: 0 0% 100%;
    --card-foreground: 220 10% 13%;

    --popover: 0 0% 100%;
    --popover-foreground: 220 10% 13%;

    --primary: 217 91% 60%; /* #1a73e8 */
    --primary-foreground: 0 0% 100%;

    --secondary: 5 86% 57%; /* #ea4335 */
    --secondary-foreground: 0 0% 100%;
    
    --success: 145 63% 42%; /* #34a853 */
    --warning: 45 93% 50%; /* #fbbc04 */
    
    --surface: 220 17% 98%; /* #f8f9fa */
    --text-primary: 220 10% 13%; /* #202124 */
    --text-secondary: 220 4% 40%; /* #5f6368 */

    --muted: 220 13% 91%;
    --muted-foreground: 220 4% 40%;

    --accent: 220 13% 91%; /* hover color */
    --accent-foreground: 220 10% 13%;

    --destructive: 0 84.2% 60.2%;
    --destructive-foreground: 210 40% 98%;

    --border: 220 10% 91%; /* #e8eaed */
    --input: 220 10% 91%;
    --ring: 217 91% 60%;

    --radius: 0.5rem;

    /* Custom variables from prototype */
    --primary-color: hsl(var(--primary));
    --secondary-color: hsl(var(--secondary));
    --success-color: hsl(var(--success));
    --warning-color: hsl(var(--warning));
    --surface-color: hsl(var(--surface));
    --text-primary-color: hsl(var(--text-primary));
    --text-secondary-color: hsl(var(--text-secondary));
    --border-color: hsl(var(--border));
    --hover-color: hsl(var(--accent));
  }

  .dark {
    --background: 240 5% 12%; /* #1f1f1f */
    --foreground: 210 17% 91%; /* #e8eaed */

    --card: 240 5% 18%; /* #2d2e30 */
    --card-foreground: 210 17% 91%;

    --popover: 240 5% 12%;
    --popover-foreground: 210 17% 91%;

    --primary: 217 91% 60%;
    --primary-foreground: 0 0% 100%;

    --secondary: 5 86% 57%;
    --secondary-foreground: 0 0% 100%;
    
    --success: 145 63% 42%;
    --warning: 45 93% 50%;

    --surface: 240 5% 12%;
    --text-primary: 210 17% 91%;
    --text-secondary: 220 6% 60%; /* #9aa0a6 */
    
    --muted: 240 4% 23%; /* #3c4043 */
    --muted-foreground: 220 6% 60%;

    --accent: 240 4% 18%; /* dark hover color */
    --accent-foreground: 210 17% 91%;

    --destructive: 0 62.8% 30.6%;
    --destructive-foreground: 210 40% 98%;

    --border: 240 4% 23%;
    --input: 240 4% 23%;
    --ring: 217 91% 60%;
  }
}

@layer base {
  * {
    @apply border-[hsl(var(--border))];
  }
  body {
    @apply bg-[hsl(var(--surface))] text-[hsl(var(--text-primary))];
  }
}

/* Custom styles from prototype, adapted for Tailwind/ShadCN */
@layer components {
  .sidebar {
    @apply w-[300px] bg-[hsl(var(--surface))] border-r flex flex-col transition-all duration-300 z-[1000];
  }
  .sidebar.collapsed {
    @apply w-[70px];
  }
  .sidebar-header {
      @apply p-4 border-b flex items-center justify-between bg-white dark:bg-[hsl(var(--card))];
  }
  .logo {
      @apply flex items-center text-xl font-medium text-[hsl(var(--text-secondary))];
  }
  .control-btn {
      @apply bg-transparent border-none p-2 rounded-full cursor-pointer transition-colors text-[hsl(var(--text-secondary))] hover:bg-[hsl(var(--accent))];
  }
  .compose-btn {
      @apply bg-[hsl(var(--primary))] text-white border-none py-3 px-5 rounded-full cursor-pointer text-sm transition-all flex items-center gap-2 hover:bg-[#1557b0] hover:-translate-y-px shadow-lg;
  }
  .search-container {
      @apply p-4 relative;
  }
  .search-input {
      @apply w-full py-3 pr-4 pl-11 border rounded-full text-sm bg-white dark:bg-[hsl(var(--card))] transition-all focus:outline-none focus:border-[hsl(var(--primary))] focus:ring-2 focus:ring-[hsl(var(--primary)_/_0.2)];
  }
  .search-icon {
      @apply absolute left-7 top-1/2 -translate-y-1/2 text-[hsl(var(--text-secondary))];
  }
  .filters {
      @apply flex gap-2 px-4 pb-4 overflow-x-auto;
  }
  .filter-chip {
      @apply py-1.5 px-3 border rounded-2xl text-xs cursor-pointer whitespace-nowrap transition-colors;
  }
  .filter-chip.active {
      @apply bg-[hsl(var(--primary))] text-white border-[hsl(var(--primary))];
  }
  .chat-list {
      @apply flex-1 overflow-y-auto py-2;
  }
  .chat-item {
      @apply py-3 px-4 cursor-pointer transition-colors border-l-4 border-transparent flex items-center hover:bg-[hsl(var(--accent))];
  }
  .chat-item.active {
      @apply bg-[#e8f0fe] dark:bg-[hsl(var(--primary)_/_0.1)] border-[hsl(var(--primary))];
  }
  .avatar {
      @apply w-10 h-10 rounded-full flex-shrink-0 bg-muted flex items-center justify-center font-medium mr-3 relative;
  }
  .status-indicator {
      @apply absolute bottom-[-2px] right-[-2px] w-3 h-3 rounded-full border-2 border-white dark:border-[hsl(var(--card))];
  }
  .status-online { @apply bg-[hsl(var(--success))]; }
  .status-away { @apply bg-[hsl(var(--warning))]; }
  .status-busy { @apply bg-[hsl(var(--secondary))]; }
  .status-offline { @apply bg-gray-400; }
  .chat-preview {
      @apply flex-1 min-w-0;
  }
  .chat-header-info {
      @apply flex justify-between items-center mb-1;
  }
  .chat-name {
      @apply font-medium text-[hsl(var(--text-primary))];
  }
  .chat-time {
      @apply text-xs text-[hsl(var(--text-secondary))];
  }
  .chat-last-message {
      @apply text-[hsl(var(--text-secondary))] text-sm whitespace-nowrap overflow-hidden text-ellipsis flex items-center gap-1;
  }
  .main-chat {
      @apply flex-1 flex flex-col bg-white dark:bg-[hsl(var(--background))];
  }
  .chat-header {
      @apply py-4 px-6 border-b flex items-center justify-between bg-white dark:bg-[hsl(var(--card))] z-10;
  }
  .chat-title {
      @apply flex items-center;
  }
  .chat-info {
      @apply ml-3;
  }
  .chat-info h3 {
      @apply text-base font-medium text-[hsl(var(--text-primary))] mb-0;
  }
  .chat-status {
      @apply text-xs text-[hsl(var(--text-secondary))] flex items-center gap-1;
  }
  .chat-actions {
      @apply flex gap-2;
  }
  .action-btn {
      @apply p-2.5 border-none bg-transparent cursor-pointer rounded-full transition-colors text-[hsl(var(--text-secondary))] hover:bg-[hsl(var(--accent))];
  }
  .messages-container {
      @apply flex-1 overflow-y-auto p-6 bg-[hsl(var(--surface))];
  }
  .date-separator {
      @apply text-center my-5 relative;
  }
  .date-separator::before {
      @apply content-[''] absolute top-1/2 left-0 right-0 h-px bg-[hsl(var(--border))];
  }
  .date-separator span {
      @apply bg-[hsl(var(--surface))] px-4 text-[hsl(var(--text-secondary))] text-xs relative z-10;
  }
  .message {
      @apply mb-4;
  }
  .message.sent {
      @apply flex justify-end;
  }
  .message.received {
      @apply flex justify-start;
  }
  .message-content {
      @apply max-w-[70%];
  }
  .message-bubble {
      @apply py-3 px-4 rounded-2xl break-words;
  }
  .message.sent .message-bubble {
      @apply bg-[hsl(var(--primary))] text-white rounded-br-md;
  }
  .message.received .message-bubble {
      @apply bg-white dark:bg-[hsl(var(--card))] border rounded-bl-md;
  }
  .message-meta {
      @apply flex justify-between items-center mt-1 text-xs opacity-70;
  }
  .message-time {
      @apply text-[hsl(var(--text-secondary))];
  }
  .input-container {
      @apply p-4 px-6 bg-white dark:bg-[hsl(var(--card))] border-t;
  }
  .input-wrapper {
      @apply flex items-end gap-3 bg-[hsl(var(--surface))] rounded-3xl p-2 px-4 border transition-all focus-within:border-[hsl(var(--primary))];
  }
  .input-tools {
      @apply flex gap-2;
  }
  .input-tool {
      @apply bg-transparent border-none cursor-pointer p-1.5 rounded-full text-[hsl(var(--text-secondary))] transition-colors hover:bg-[hsl(var(--accent))];
  }
  .message-input {
      @apply flex-1 border-none bg-transparent p-2 text-sm resize-none h-auto min-h-[24px] outline-none shadow-none focus-visible:ring-0;
  }
  .send-btn {
      @apply bg-[hsl(var(--primary))] text-white border-none h-9 w-9 rounded-full cursor-pointer transition-all flex items-center justify-center opacity-50 scale-90;
  }
  .send-btn.active {
      @apply opacity-100 scale-100;
  }
}
